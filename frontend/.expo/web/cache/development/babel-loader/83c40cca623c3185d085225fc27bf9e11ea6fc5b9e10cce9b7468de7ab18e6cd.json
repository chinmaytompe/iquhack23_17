{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React, { Component } from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nvar windowWidth = Dimensions.get('window').width;\nvar windowHeight = Dimensions.get('window').height;\nimport * as FS from \"expo-file-system\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar App = function (_Component) {\n  _inherits(App, _Component);\n  var _super = _createSuper(App);\n  function App(props) {\n    var _this;\n    _classCallCheck(this, App);\n    _this = _super.call(this, props);\n    _this.uriToBase64 = function () {\n      var _ref = _asyncToGenerator(function* (uri) {\n        return yield FS.readAsStringAsync(uri, {\n          encoding: FS.EncodingType.Base64\n        });\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    _this.pickMedia = _asyncToGenerator(function* () {\n      _this.setState(function (state, props) {\n        return {\n          cameraRollPer: state.cameraRollPer,\n          disableButton: true\n        };\n      });\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        base64: true\n      });\n      if (result.cancelled) {\n        return;\n      }\n      if (result.type == \"image\") {\n        yield _this.toServer({\n          type: result.type,\n          base64: result.base64,\n          uri: result.uri\n        });\n      } else {\n        var base64 = yield _this.uriToBase64(result.uri);\n        yield _this.toServer({\n          type: result.type,\n          base64: base64,\n          uri: result.uri\n        });\n      }\n    });\n    _this.toServer = function () {\n      var _ref3 = _asyncToGenerator(function* (mediaFile) {\n        var type = mediaFile.type;\n        var schema = \"http://\";\n        var host = \"10.189.37.233\";\n        var route = \"\";\n        var port = \"5000\";\n        var url = \"\";\n        var content_type = \"\";\n        type === \"image\" ? (route = \"/image\", content_type = \"image/jpeg\") : (route = \"/video\", content_type = \"video/mp4\");\n        url = schema + host + \":\" + port + route;\n        var response = yield FS.uploadAsync(url, mediaFile.uri, {\n          headers: {\n            \"content-type\": content_type\n          },\n          httpMethod: \"POST\",\n          uploadType: FS.FileSystemUploadType.BINARY_CONTENT\n        });\n        console.log(response.headers);\n        console.log(response.body);\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    _this.state = {\n      cameraRollPer: null,\n      disableButton: false\n    };\n    return _this;\n  }\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(function* () {\n        var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n          status = _yield$ImagePicker$re.status;\n        this.setState(function (state, props) {\n          return {\n            cameraRollPer: status === \"granted\",\n            disableButton: false\n          };\n        });\n      });\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      return _jsxs(SafeAreaView, {\n        style: styles.container,\n        children: [_jsxs(View, {\n          style: styles.headerBox,\n          children: [_jsx(Text, {\n            style: styles.headerText,\n            children: \"QNN Image Recognition\"\n          }), _jsx(Image, {\n            source: require(\"./assets/logo.png\"),\n            style: {\n              width: 300,\n              height: 300\n            }\n          })]\n        }), _jsx(View, {\n          style: styles.container,\n          children: this.state.cameraRollPer ? _jsx(Button, {\n            title: \"Pick From Gallery\",\n            disabled: this.state.disableButton,\n            onPress: _asyncToGenerator(function* () {\n              yield _this2.pickMedia();\n              _this2.setState(function (s, p) {\n                return {\n                  cameraRollPer: s.cameraRollPer,\n                  disableButton: false\n                };\n              });\n            })\n          }) : _jsx(Text, {\n            children: \"Camera Roll Permission Required ! \"\n          })\n        })]\n      });\n    }\n  }]);\n  return App;\n}(Component);\nexport { App as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#00000\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  headerText: {\n    color: '#ffffff',\n    fontSize: 40,\n    fontWeight: 'bold'\n  },\n  headerBox: {\n    flex: 0.25,\n    flexDirection: 'row',\n    justifyContent: 'space-evenly',\n    backgroundColor: 'skyblue',\n    width: '100%',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","Component","windowWidth","Dimensions","get","width","windowHeight","height","FS","ImagePicker","App","props","uriToBase64","uri","readAsStringAsync","encoding","EncodingType","Base64","pickMedia","setState","state","cameraRollPer","disableButton","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","base64","cancelled","type","toServer","mediaFile","schema","host","route","port","url","content_type","response","uploadAsync","headers","httpMethod","uploadType","FileSystemUploadType","BINARY_CONTENT","console","log","body","requestMediaLibraryPermissionsAsync","status","styles","container","headerBox","headerText","require","s","p","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","color","fontSize","fontWeight","flexDirection"],"sources":["C:/Users/MaxHu/Projects/Coding/iQuHack/iquhack23_17/frontend/App.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport {Button, Image, SafeAreaView, StyleSheet, Text, View, Dimensions} from \"react-native\";\n\nconst windowWidth = Dimensions.get('window').width;\nconst windowHeight = Dimensions.get('window').height;\n\n\n//Importing the installed libraries\nimport * as FS from \"expo-file-system\";\nimport * as ImagePicker from \"expo-image-picker\";\n\nexport default class App extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            cameraRollPer: null,\n            disableButton: false,\n        };\n    }\n\n    async componentDidMount() {\n        const {status} = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        this.setState((state, props) => {\n            return {\n                cameraRollPer: status === \"granted\",\n                disableButton: false,\n            };\n        });\n    }\n\n    uriToBase64 = async (uri) => {\n        return await FS.readAsStringAsync(uri, {\n            encoding: FS.EncodingType.Base64,\n        });\n    };\n\n    pickMedia = async () => {\n        this.setState((state, props) => {\n            return {\n                cameraRollPer: state.cameraRollPer,\n                disableButton: true,\n            };\n        });\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\n            base64: true,\n        });\n        if (result.cancelled) {\n            return;\n        }\n        if (result.type == \"image\") {\n            await this.toServer({\n                type: result.type,\n                base64: result.base64,\n                uri: result.uri,\n            });\n        } else {\n            let base64 = await this.uriToBase64(result.uri);\n            await this.toServer({\n                type: result.type,\n                base64: base64,\n                uri: result.uri,\n            });\n        }\n    };\n\n    toServer = async (mediaFile) => {\n        let type = mediaFile.type;\n        let schema = \"http://\";\n        let host = \"10.189.37.233\";\n        let route = \"\";\n        let port = \"5000\";\n        let url = \"\";\n        let content_type = \"\";\n        type === \"image\"\n            ? ((route = \"/image\"), (content_type = \"image/jpeg\"))\n            : ((route = \"/video\"), (content_type = \"video/mp4\"));\n        url = schema + host + \":\" + port + route;\n\n        let response = await FS.uploadAsync(url, mediaFile.uri, {\n            headers: {\n                \"content-type\": content_type,\n            },\n            httpMethod: \"POST\",\n            uploadType: FS.FileSystemUploadType.BINARY_CONTENT,\n        });\n\n        console.log(response.headers);\n        console.log(response.body);\n    };\n\n    render() {\n        return (\n            <SafeAreaView style={styles.container}>\n                <View style={styles.headerBox}>\n                    <Text style={styles.headerText}>\n                        QNN Image Recognition\n                    </Text>\n                    <Image source={require(\"./assets/logo.png\")}\n                           style={{width: 300, height: 300}}/>\n                </View>\n                <View style={styles.container}>\n                {this.state.cameraRollPer ? (\n                    <Button\n                        title=\"Pick From Gallery\"\n                        disabled={this.state.disableButton}\n                        onPress={async () => {\n                            await this.pickMedia();\n                            this.setState((s, p) => {\n                                return {\n                                    cameraRollPer: s.cameraRollPer,\n                                    disableButton: false,\n                                };\n                            });\n                        }}\n                    />\n                ) : (\n                    <Text>Camera Roll Permission Required ! </Text>\n                )}\n                </View>\n            </SafeAreaView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: \"#00000\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    headerText: {\n        color: '#ffffff',\n        fontSize: 40,\n        fontWeight:'bold',\n    },\n    headerBox: {\n        flex: 0.25,\n        flexDirection:'row',\n        justifyContent:'space-evenly',\n        backgroundColor: 'skyblue',\n        width: '100%',\n        alignItems: 'center',\n    },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
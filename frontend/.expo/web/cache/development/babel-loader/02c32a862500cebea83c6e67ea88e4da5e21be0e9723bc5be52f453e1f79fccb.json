{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React, { Component } from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport * as FS from \"expo-file-system\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar App = function (_Component) {\n  _inherits(App, _Component);\n  var _super = _createSuper(App);\n  function App(props) {\n    var _this;\n    _classCallCheck(this, App);\n    _this = _super.call(this, props);\n    _this.uriToBase64 = function () {\n      var _ref = _asyncToGenerator(function* (uri) {\n        var base64 = yield FS.readAsStringAsync(uri, {\n          encoding: FS.EncodingType.Base64\n        });\n        return base64;\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    _this.pickMedia = _asyncToGenerator(function* () {\n      _this.setState(function (state, props) {\n        return {\n          cameraRollPer: state.cameraRollPer,\n          disableButton: true\n        };\n      });\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        base64: true\n      });\n      if (result.cancelled) {\n        return;\n      }\n      if (result.type == \"image\") {\n        yield _this.toServer({\n          type: result.type,\n          base64: result.base64,\n          uri: result.uri\n        });\n      } else {\n        var base64 = yield _this.uriToBase64(result.uri);\n        yield _this.toServer({\n          type: result.type,\n          base64: base64,\n          uri: result.uri\n        });\n      }\n    });\n    _this.toServer = function () {\n      var _ref3 = _asyncToGenerator(function* (mediaFile) {\n        var type = mediaFile.type;\n        var schema = \"http://\";\n        var host = \"10.189.37.233\";\n        var route = \"\";\n        var port = \"5000\";\n        var url = \"\";\n        var content_type = \"\";\n        type === \"image\" ? (route = \"/image\", content_type = \"image/jpeg\") : (route = \"/video\", content_type = \"video/mp4\");\n        url = schema + host + \":\" + port + route;\n        var response = yield FS.uploadAsync(url, mediaFile.uri, {\n          headers: {\n            \"content-type\": content_type\n          },\n          httpMethod: \"POST\",\n          uploadType: FS.FileSystemUploadType.BINARY_CONTENT\n        });\n        console.log(response.headers);\n        console.log(response.body);\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    _this.state = {\n      cameraRollPer: null,\n      disableButton: false\n    };\n    return _this;\n  }\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(function* () {\n        var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n          status = _yield$ImagePicker$re.status;\n        this.setState(function (state, props) {\n          return {\n            cameraRollPer: status === \"granted\",\n            disableButton: false\n          };\n        });\n      });\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      console.log(\"OBVIOUSLY\");\n      return _jsx(SafeAreaView, {\n        style: styles.container,\n        children: this.state.cameraRollPer ? _jsx(Button, {\n          title: \"Pick From Gallery\",\n          disabled: this.state.disableButton,\n          onPress: _asyncToGenerator(function* () {\n            yield _this2.pickMedia();\n            _this2.setState(function (s, p) {\n              return {\n                cameraRollPer: s.cameraRollPer,\n                disableButton: false\n              };\n            });\n          })\n        }) : _jsx(Text, {\n          children: \"Camera Roll Permission Required ! \"\n        })\n      });\n    }\n  }]);\n  return App;\n}(Component);\nexport { App as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"names":["React","Component","FS","ImagePicker","App","props","uriToBase64","uri","base64","readAsStringAsync","encoding","EncodingType","Base64","pickMedia","setState","state","cameraRollPer","disableButton","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","cancelled","type","toServer","mediaFile","schema","host","route","port","url","content_type","response","uploadAsync","headers","httpMethod","uploadType","FileSystemUploadType","BINARY_CONTENT","console","log","body","requestMediaLibraryPermissionsAsync","status","styles","container","s","p","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent"],"sources":["C:/Users/MaxHu/Projects/Coding/iQuHack React/iquhack-app/frontend/App.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Button, SafeAreaView, StyleSheet, Alert, Text } from \"react-native\";\n\n//Importing the installed libraries\nimport * as FS from \"expo-file-system\";\nimport * as ImagePicker from \"expo-image-picker\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      cameraRollPer: null,\n      disableButton: false,\n    };\n  }\n  async componentDidMount() {\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    this.setState((state, props) => {\n      return {\n        cameraRollPer: status === \"granted\",\n        disableButton: false,\n      };\n    });\n  }\n\n  uriToBase64 = async (uri) => {\n    let base64 = await FS.readAsStringAsync(uri, {\n      encoding: FS.EncodingType.Base64,\n    });\n    return base64;\n  };\n\n  pickMedia = async () => {\n    this.setState((state, props) => {\n      return {\n        cameraRollPer: state.cameraRollPer,\n        disableButton: true,\n      };\n    });\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      base64: true,\n    });\n    if (result.cancelled) {\n      return;\n    }\n    if (result.type == \"image\") {\n      await this.toServer({\n        type: result.type,\n        base64: result.base64,\n        uri: result.uri,\n      });\n    } else {\n      let base64 = await this.uriToBase64(result.uri);\n      await this.toServer({\n        type: result.type,\n        base64: base64,\n        uri: result.uri,\n      });\n    }\n  };\n\n  toServer = async (mediaFile) => {\n    let type = mediaFile.type;\n    let schema = \"http://\";\n    let host = \"10.189.37.233\";\n    let route = \"\";\n    let port = \"5000\";\n    let url = \"\";\n    let content_type = \"\";\n    type === \"image\"\n        ? ((route = \"/image\"), (content_type = \"image/jpeg\"))\n        : ((route = \"/video\"), (content_type = \"video/mp4\"));\n    url = schema + host + \":\" + port + route;\n\n    let response = await FS.uploadAsync(url, mediaFile.uri, {\n      headers: {\n        \"content-type\": content_type,\n      },\n      httpMethod: \"POST\",\n      uploadType: FS.FileSystemUploadType.BINARY_CONTENT,\n    });\n\n    console.log(response.headers);\n    console.log(response.body);\n  };\n\n  render() {\n    console.log(\"OBVIOUSLY\");\n    return (\n        <SafeAreaView style={styles.container}>\n          {this.state.cameraRollPer ? (\n              <Button\n                  title=\"Pick From Gallery\"\n                  disabled={this.state.disableButton}\n                  onPress={async () => {\n                    await this.pickMedia();\n                    this.setState((s, p) => {\n                      return {\n                        cameraRollPer: s.cameraRollPer,\n                        disableButton: false,\n                      };\n                    });\n                  }}\n              />\n          ) : (\n              <Text>Camera Roll Permission Required ! </Text>\n          )}\n        </SafeAreaView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}